parse: sourceStream class: parseScope noPattern: doitBool notifying: req ifFail: aBlock	"Parse sourceStream into a embedded BlockNode if doitFlag is true (no method header) or a MethodNode if doitFlag is false.  Parsing is done with respect to parseScope to find non-local variables.  Errors in parsing are reported to req if not nil followed by executing the fail block."	| parser tree |	source := sourceStream.	requestor := req.	doitFlag := doitBool.	scope := parseScope parseScope.	failBlock := [^ aBlock value].	parser := self realParserClass.	tree := doitFlag 			ifTrue: [parser parseDoIt: source contents]			ifFalse: [parser parseMethod: source contents].	^tree doSemanticAnalysisIn: scope